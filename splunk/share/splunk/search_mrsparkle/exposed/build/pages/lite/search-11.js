(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"views/shared/ResultsTableDrillDownPopTart":function(i,t,e){var s,l;s=[e("require/underscore"),e("shim/jquery"),i,e("views/shared/PopTart"),e("models/shared/TimeRange"),e("util/time"),e("shim/splunk.util"),e("stubs/i18n")],void 0===(l=function(i,t,e,s,l,a,n,o){return s.extend({moduleId:e.i,className:"dropdown-menu dropdown-menu-medium",initialize:function(e){s.prototype.initialize.apply(this,arguments),this.model.spanTimeRange=new l,this.constraints={keys:[],values:[]},this.fields=this.model.results.getDataFields(),this.isTimeSpan=i.has(this.options.clickMeta,"_span"),this.fieldClicked=i.has(this.options.clickMeta,"name2")?this.options.clickMeta.name2:this.options.clickMeta.name,this.fieldValueClicked=i.has(this.options.clickMeta,"value2")?this.options.clickMeta.value2:this.options.clickMeta.value,this.fieldMetadataResults=this.convertResultFieldsToMetadata(),this.metaDataHasGroupByOrSplitBy=!i.isUndefined(i.find(this.fieldMetadataResults,(function(i){return i.groupby_rank||i.splitby_field}))),this.fieldClickedMetaData=this.fieldMetadataResults[this.fieldClicked]||{},this.cellDrilldownable=this.isCellDrilldownable(),this.hasRenderedDeferred=t.Deferred(),this.cellDrilldownable&&(this.splitbyField=this.fieldClickedMetaData?this.fieldClickedMetaData.splitby_field:void 0,this.splitbyValue=this.splitbyField?this.fieldClickedMetaData.splitby_value:void 0,!this.isTimeSpan||this.splitbyField||this.splitbyValue||(this.splitbyField=this.fieldClicked,this.splitbyValue=this.fieldValueClicked),this.fieldClickedRank=this.metaDataHasGroupByOrSplitBy?this.fieldClickedMetaData.groupby_rank:this.fields.indexOf(this.fieldClicked).toString()),this.metaDataHasGroupByOrSplitBy?this.buildConstraintsByGroupBy():this.buildConstraintsByFieldIndex(),this.isTimeSpan&&(this.timeSpanDfd=this.model.spanTimeRange.save({earliest:this.options.clickMeta.value,latest:(parseFloat(this.options.clickMeta.value)+this.options.clickMeta._span).toFixed(3)}))},convertResultFieldsToMetadata:function(){var t={},e=this.model.results.get("fields");return i(e).each((function(e){i.isObject(e)&&(t[e.name]=i(e).omit("name"))})),t},stripClickMetaToTimeRange:function(){return i.extend(i(this.options.clickMeta).omit("name2","value2"),{rowContext:i(this.options.clickMeta).pick("row._time")})},stripClickMetaToColumnOnly:function(){var e=this.options.clickMeta;return e.name2?i(e).omit("name","value","_span"):t.extend(!0,{},this.options.clickMeta)},isCellDrilldownable:function(){if("row"===this.options.clickMeta.type||"_time"===this.fieldClicked)return!1;if(this.metaDataHasGroupByOrSplitBy){if(!this.fieldClickedMetaData||!this.fieldClickedMetaData.groupby_rank&&!this.fieldClickedMetaData.splitby_field)return!1}else if(this.fieldClickedMetaData){var i=this.fieldClickedMetaData.type_special;if("count"===i||"percent"===i)return!1}return!0},buildConstraintsByGroupBy:function(){for(var i=0;i<this.fields.length;i++){var t,e=this.fields[i],s=this.fieldMetadataResults[e];if(s&&s.groupby_rank)if(t=parseInt(s.groupby_rank,10),!this.fieldClickedRank||t<this.fieldClickedRank)this.constraints.keys.push(e),this.constraints.values.push(this.options.clickMeta.rowContext["row."+e]);else{if(!this.fieldClickedRank||t!=this.fieldClickedRank)break;this.constraints.keys.push(e),this.constraints.values.push(this.fieldValueClicked)}}},buildConstraintsByFieldIndex:function(){for(var t=i.isUndefined(this.fieldClickedRank)?this.fields.length:this.fieldClickedRank,e=0;e<t;e++){var s=this.fields[e];if(this.fieldMetadataResults&&this.fieldMetadataResults[s]){var l=this.fieldMetadataResults[s].type_special;if("count"===l||"percent"===l)continue}this.constraints.keys.push(s),this.constraints.values.push(this.options.clickMeta.rowContext["row."+s])}e==this.fieldClickedRank&&(this.constraints.keys.push(this.fields[e]),this.constraints.values.push(this.fieldValueClicked))},events:{"click .time_span":function(t){var e=i.extend({},this.options.clickMeta,{type:"row"});this.fieldDrilldown(t,e)},"click .time_span_reporting":function(i){this.fieldDrilldown(i,this.stripClickMetaToTimeRange(),{stripReportsSearch:!1})},"click .splitby_curr_inc_cell":function(i){this.fieldDrilldown(i,this.options.clickMeta)},"click .curr_exc_cell":function(i){this.fieldDrilldown(i,this.stripClickMetaToColumnOnly(),{stripReportsSearch:!1,negate:!0})},"click .curr_inc_val":function(i){var t=this.stripClickMetaToColumnOnly(),e=t.name2||t.name,s=e&&this.fieldMetadataResults[e];s&&s.hasOwnProperty("groupby_rank")||this.cellDrilldownable||(t.type="row"),this.fieldDrilldown(i,t)},"click .curr_exc_val":function(i){var t=this.stripClickMetaToColumnOnly(),e=t.name2||t.name,s=e&&this.fieldMetadataResults[e];s&&s.hasOwnProperty("groupby_rank")||(t.type="row"),this.fieldDrilldown(i,t,{negate:!0})},"click .only_val":function(i){this.fieldDrilldown(i,this.stripClickMetaToColumnOnly(),{newSearch:!0})},"click .curr_inc_con":function(i){this.fieldDrilldown(i,this.options.clickMeta,{fields:this.constraints.keys,values:this.constraints.values})},"click .curr_exc_con":function(i){this.fieldDrilldown(i,this.options.clickMeta,{fields:this.constraints.keys,values:this.constraints.values,negate:!0})}},fieldDrilldown:function(i,e,s){i.preventDefault(),(s=s||{}).drilldownNewTab=t(i.currentTarget).hasClass("secondary-link"),this.trigger("drilldown",e,s),this.hide()},show:function(i,e){t.when(this.hasRenderedDeferred).then(function(){s.prototype.show.call(this,i,e)}.bind(this))},render:function(){return t.when(this.timeSpanDfd).then(function(){this.$el.html(s.prototype.template_menu);var t,e=!this.model.spanTimeRange.isRangeSnappedToSeconds(),l=e?"YYYY-MM-dd HH:mm:ss.TTT":"YYYY-MM-dd HH:mm:ss",r=o.format_date(a.isoToDateObject(this.model.spanTimeRange.get("earliest_iso")),l),d=o.format_date(a.isoToDateObject(this.model.spanTimeRange.get("latest_iso")),l);this.isTimeSpan?(this.$el.addClass("time-span-drilldown"),e&&this.$el.removeClass("dropdown-menu-medium").addClass("dropdown-menu-wide"),t=this.cellDrilldownable?this.splitby_cell_template:this.time_span_row_template):t=this.cellDrilldownable?this.splitbyField?this.splitby_cell_template:this.cell_template:this.row_template;var c=this.compileTemplate(t);this.$el.append(c({_:i,showConstraints:"0"!=this.fieldClickedRank&&!i.isEmpty(this.constraints.keys),constraintKeys:this.constraints.keys,constraintValues:this.constraints.values,earliest:r,latest:d,isTimeSpan:this.isTimeSpan,splitbyField:this.splitbyField,splitbyValue:this.splitbyValue,fieldClicked:this.fieldClicked,fieldValueClicked:this.fieldValueClicked,splunkUtil:n})),this.hasRenderedDeferred.resolve()}.bind(this)),this},time_span_row_template:'                <ul>                    <li class="info">                        <%- splunkUtil.sprintf("%s to %s", earliest, latest) %>                    </li>                    <li>                        <a class="time_span primary-link" href="#"><%- _("View events").t() %></a>                        <a class="time_span secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="time_span_reporting primary-link" href="#"><%- _("Narrow to this time range").t() %></a>                        <a class="time_span_reporting secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                </ul>            ',splitby_cell_template:'                <% var text = splunkUtil.sprintf("%s = %s", splitbyField, splitbyValue); %>                <ul>                    <li class="info">                        <span class="field-value" title="<%- text %>"><%- text %></span>                    </li>                    <li>                        <a class="curr_exc_cell primary-link" href="#"><%- _("Exclude from results").t() %></a>                        <a class="curr_exc_cell secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                    <li class="info">                        <% var splitText; %>                        <% if (isTimeSpan) { %>                            <% splitText = splunkUtil.sprintf("%s to %s", earliest, latest) %>                        <% } else { %>                            <% splitText = splunkUtil.sprintf("%s = %s", constraintKeys[0], constraintValues[0]) %>                        <% } %>                        <span class="field-value" title="<%- splitText %>"><%- splitText %></span>                        <span class="field-value" title="<%- text %>"><%- text %></span>                    </li>                    <li>                        <a class="splitby_curr_inc_cell primary-link" href="#"><%- _("View events").t() %></a>                        <a class="splitby_curr_inc_cell secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                </ul>            ',row_template:'                <ul>                <% if (showConstraints) { %>                    <li class="info">                    <% for(var i = 0; i < constraintKeys.length; i++) { %>                        <%                            var key = constraintKeys[i],                                value = constraintValues[i],                                text = splunkUtil.sprintf("%s = %s", key, _.isArray(value) ? value.join(" | ") : value);                        %>                        <span class="field-value" title="<%- text %>"><%- text %></span>                    <% } %>                    </li>                <% } %>                    <li>                        <a class="curr_inc_val primary-link" href="#"><%- _("View events").t() %></a>                        <a class="curr_inc_val secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                <% if (showConstraints) { %>                    <li>                        <a class="curr_exc_val primary-link" href="#"><%- _("Other events").t() %></a>                        <a class="curr_exc_val secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                <% } %>                </ul>            ',cell_template:'                <ul>                <% if (fieldClicked) { %>                    <li class="info">                        <% var fieldInfoText = splunkUtil.sprintf("%s = %s", fieldClicked, fieldValueClicked); %>                        <span class="field-value" title="<%- fieldInfoText %>"><%- fieldInfoText %>                    </li>                <% } %>                                    <li>                        <a class="curr_inc_val primary-link" href="#"><%- _("View events").t() %></a>                        <a class="curr_inc_val secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="curr_exc_val primary-link" href="#"><%- _("Other events").t() %></a>                        <a class="curr_exc_val secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="curr_exc_cell primary-link" href="#"><%- _("Exclude from results").t() %></a>                        <a class="curr_exc_cell secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="only_val primary-link" href="#"><%- _("New search").t() %></a>                        <a class="only_val secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                                <% if (showConstraints) { %>                    <li class="info">                    <% for(var i = 0; i < constraintKeys.length; i++) { %>                        <%                            var key = constraintKeys[i],                                value = constraintValues[i],                                text = splunkUtil.sprintf("%s = %s", key, _.isArray(value) ? value.join(" | ") : value);                        %>                        <span class="field-value" title="<%- text %>"><%- text %></span>                    <% } %>                    </li>                    <li>                        <a class="curr_inc_con primary-link" href="#"><%- _("View events").t() %></a>                        <a class="curr_inc_con secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="curr_exc_con primary-link" href="#"><%- _("Other events").t() %></a>                        <a class="curr_exc_con secondary-link" href="#"><i class="icon-external"></i></a>                    </li>                <% } %>                </ul>            '})}.apply(t,s))||(i.exports=l)},"views/shared/ResultsTableDrilldown":function(i,t,e){var s,l;s=[e("shim/jquery"),e("require/underscore"),i,e("views/shared/results_table/ResultsTableMaster"),e("views/shared/ResultsTableDrillDownPopTart"),e("views/shared/delegates/Modalize"),e("util/keyboard")],void 0===(l=function(i,t,e,s,l,a,n){return s.extend({moduleId:e.i,initialize:function(){this.options.splitHighlight=!1,this.children.modalize=new a({el:this.el,tbody:"tbody"}),this.model.state.set("isModalized",!1),this.pendingUpdate=!1,s.prototype.initialize.call(this,this.options)},events:i.extend({},s.prototype.events,{"keydown tbody tr":function(t){if(t.which===n.KEYS.TAB&&this.model.state.get("isModalized")){var e="row"===this.model.config.get("display.statistics.drilldown");n.handleCircularTabbing(i(t.target).closest("tr"),t,e)}}}),startListening:function(){s.prototype.startListening.apply(this,arguments),this.listenTo(this.children.modalize,"unmodalize",(function(){this.model.state.set("isModalized",!1),this.pendingUpdate&&(this.pendingUpdate=!1,this.invalidate("updateViewPass"))})),this.listenTo(this.model.state,"change:isModalized",(function(i,t){t||(this.children.tableDock&&this.children.tableDock.enable(),this.children.modalize.debouncedCleanup())}))},deactivate:function(i){return this.active?(this.model.state.set("isModalized",!1),this.pendingUpdate=!1,s.prototype.deactivate.apply(this,arguments)):s.prototype.deactivate.apply(this,arguments)},emitDrilldownEvent:function(e){var s,a,n,o=i(e.originalEvent.target),r="row"===e.type,d=!1;if(r?(s=o.closest("tr"),a=o.is("tr")?o.find("td[data-cell-index]").first():o.closest("td")):a=s=o,this.children.resultsTableDrillDownPopTart){var c=this.children.resultsTableDrillDownPopTart.shown;if(this.children.resultsTableDrillDownPopTart.hide(),this.children.resultsTableDrillDownPopTart.remove(),this.stopListening(this.children.resultsTableDrillDownPopTart),delete this.children.resultsTableDrillDownPopTart,c)return}this.model.state.get("isModalized")||(this.model.state.set("isModalized",!0),this.children.tableDock&&this.children.tableDock.disable(),this.children.modalize.debouncedShow(e.rowIndex)),r||(d=(n=i.trim(o.text()))&&!o.children().length),d&&(a.html(i("<span>").text(n)),a=a.find("span")),this.children.resultsTableDrillDownPopTart=new l({clickMeta:e,onHiddenRemove:!0,model:{application:this.model.application,results:this.model.searchData},scrollContainer:a.closest(".results-table"),ignoreToggleMouseDown:!0}),d&&this.listenToOnce(this.children.resultsTableDrillDownPopTart,"hidden",(function(){o.text(n)})),this.children.resultsTableDrillDownPopTart.render().appendTo(i("body")).show(a,{$toggle:s}),this.listenTo(this.children.resultsTableDrillDownPopTart,"drilldown",t.bind(this.trigger,this,"drilldown"))},updateView:function(){this.model.state.get("isModalized")?this.pendingUpdate=!0:s.prototype.updateView.apply(this,arguments)}})}.apply(t,s))||(i.exports=l)},"views/shared/delegates/Modalize":function(i,t,e){var s,l;s=[e("shim/jquery"),e("require/underscore"),e("views/shared/delegates/Base"),e("util/keyboard")],void 0===(l=function(i,t,e,s){return e.extend({initialize:function(){var i={tbody:"> tbody",parentContainerSelector:"div",overlayZIndex:404,secondaryRowSelector:""};t.defaults(this.options,i),e.prototype.initialize.apply(this,arguments)},show:function(e){if(this.cleanup(),t.isNumber(e)){this.rowIdx=e,this.$tbody=this.$(this.options.tbody),this.$row=this.$tbody.children(":not("+this.options.secondaryRowSelector+")").eq(this.rowIdx);var s={topHeight:0,bottomHeight:0,tableHeaderHeight:0,dockedThead:0,width:this.$el[0].scrollWidth+"px"};this.$el.append(this.$top=i('<div class="modalize-table-top" />')),this.$el.append(this.$bottom=i('<div class="modalize-table-bottom" />')),i(".main-section-body").append(this.$overlay=i('<div class="modalize-table-overlay" />')),this.addEventHandlers(t.debounce(function(i){this.show(i)}.bind(this),100)),this.$row.prevAll(":visible").each((function(t,e){s.topHeight+=i(e).outerHeight(!0)})),this.$row.nextAll(":visible:not("+this.options.secondaryRowSelector+")").each((function(t,e){s.bottomHeight+=i(e).outerHeight(!0)})),this.$el.find("> table").each((function(t,e){s.bottomHeight+=parseInt(i(e).css("marginBottom").slice(0,-2),10)})),this.$el.find("> table:not(.table-expanded, .table-embed)").each((function(t,e){s.tableHeaderHeight+=i(e).find("tr").first().height()})),this.applycss(s)}},debouncedShow:function(){this._debouncedShow||(this._debouncedShow=t.debounce(this.show,0)),this._debouncedShow.apply(this,arguments)},update:function(){this.rowIdx&&this.show(this.rowIdx)},addEventHandlers:function(t){var e=function(){this.$top.remove(),this.$bottom.remove(),this.$overlay.remove(),this.trigger("unmodalize",this.rowIdx),this.$el.closest(this.options.parentContainerSelector).css({"z-index":0})}.bind(this);this.$top.on("click",e),this.$bottom.on("click",e),this.$overlay.on("click",e),this.$tbody.on("keydown.exit-on-escape",function(i){i.which===s.KEYS.ESCAPE&&(e(),this.$row&&this.$row.find("td.expands")[0].focus())}.bind(this)),this.lastHeight=i(window).height(),this.lastWidth=i(window).width(),i(window).on("resize."+this.cid,function(){var e=i(window).height(),s=i(window).width();e==this.lastHeight&&s==this.lastWidth||(this.lastHeight=e,this.lastWidth=s,t(this.rowIdx))}.bind(this))},cleanup:function(){this.rowIdx&&delete this.rowIdx,this.$top&&this.$top.remove(),this.$bottom&&this.$bottom.remove(),this.$overlay&&this.$overlay.remove(),this.$tbody&&this.$tbody.off(".exit-on-escape"),i(window).off("."+this.cid),this.$el.closest(this.options.parentContainerSelector).css({"z-index":0})},debouncedCleanup:function(){this._debouncedCleanup||(this._debouncedCleanup=t.debounce(this.cleanup,0)),this._debouncedCleanup.apply(this,arguments)},applycss:function(i){this.$el.closest(this.options.parentContainerSelector).css({"z-index":this.options.overlayZIndex+1}),this.$top.css({width:i.width,height:i.topHeight+i.tableHeaderHeight+"px"}),this.$bottom.css({width:i.width,height:i.bottomHeight+"px"}),this.$overlay.css({"z-index":this.options.overlayZIndex})},remove:function(){return e.prototype.remove.apply(this),i(window).off("resize."+this.cid),this.$top&&this.$top.remove(),this.$bottom&&this.$bottom.remove(),this.$overlay&&this.$overlay.remove(),this}})}.apply(t,s))||(i.exports=l)}}]);