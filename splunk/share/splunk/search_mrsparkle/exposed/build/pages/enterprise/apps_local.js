!function(e){function t(t){for(var i,r,o=t[0],l=t[1],p=t[2],c=0,h=[];c<o.length;c++)r=o[c],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&h.push(a[r][0]),a[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(d&&d(t);h.length;)h.shift()();return n.push.apply(n,p||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},a={7:0},n=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.e=function(e){var t=[],s=a[e];if(0!==s)if(s)t.push(s[2]);else{var i=new Promise((function(t,i){s=a[e]=[t,i]}));t.push(s[2]=i);var n,o=document.createElement("script");o.charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.src=function(e){return r.p+""+({}[e]||e)+".js"}(e);var l=new Error;n=function(t){o.onerror=o.onload=null,clearTimeout(p);var s=a[e];if(0!==s){if(s){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",l.name="ChunkLoadError",l.type=i,l.request=n,s[1](l)}a[e]=void 0}};var p=setTimeout((function(){n({type:"timeout",target:o})}),12e4);o.onerror=o.onload=n,document.head.appendChild(o)}return Promise.all(t)},r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var p=0;p<o.length;p++)t(o[p]);var d=l;n.push([1623,0]),s()}({1623:function(e,t,s){var i,a;s.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,s,i="",a=0,n=arguments.length;a<n;a++)(s=(t=arguments[a].toString()).length)>1&&"/"==t.charAt(s-1)&&(t=t.substring(0,s-1)),"/"!=t.charAt(0)?i+="/"+t:i+=t;if("/"!=i){var r=i.split("/"),o=r[1];if("static"==o||"modules"==o){var l=i.substring(o.length+2,i.length);i="/"+o,window.$C.BUILD_NUMBER&&(i+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(i+="."+window.$C.BUILD_PUSH_NUMBER),"app"==r[2]&&(i+=":"+e("APP_BUILD",0)),i+="/"+l}}var p=e("MRSPARKLE_ROOT_PATH","/"),d=e("LOCALE","en-US"),c="/"+d+i;return""==p||"/"==p?c:p+c}("/static/build/pages/enterprise")+"/"}(),i=[s("routers/AppsLocal"),s("util/router_utils")],void 0===(a=function(e,t){new e;t.start_backbone_history()}.apply(t,i))||(e.exports=a)},1624:function(e,t){e.exports='<div class="app">\n    <div class="tile-content-wrapper">\n        <div class="app-icon">\n            <img src="<%- icon %>" alt="<%- _("App icon").t() %>">\n            <div class="app-enable"></div>\n        </div>\n        <div class="app-info">\n            <div class="app-actions-placeholder"></div>\n            <h3 class="title"><%- title %></h3>\n            <p class="version"><%- _("Version").t() %>: <%- version %></p>\n            <% if( description.length > descriptionMaxLength) { %>\n                <p class="app-description app-description-short"><%- description.substring(0, descriptionMaxLength - 30) %>... <a href="#" class="app-more-description"><%- _("More").t() %></a></p>\n                <p class="app-description app-description-full"><%- description %><br><a href="#" class="app-less-description"><%- _("Less").t() %></a></p>\n            <% } else { %>\n                <p class="app-description"><%- description %></p>\n            <% } %>\n            <% if(certified === "certified") { %>\n                <div class="app-certified certified-lite"><%- _("Splunk Certified").t() %></div>\n            <% } %>\n        </div>\n        <div class="app-actions"></div>\n    </div>\n</div>\n'},1625:function(e,t,s){(e.exports=s(3)(!1)).push([e.i,".add-on-tiles,.app-tiles{padding-left:20px}.section-header{border-bottom:0}.app-actions .btn{margin-right:10px}.enable-wrapper input,.enable-wrapper label{display:inline-block;vertical-align:middle;margin:0}.certified-lite{position:absolute;bottom:5px;right:20px}.object-ct{position:absolute;right:10px}.empty-ct{padding:5px 10px}.dropdown-menu li>a.total-item{border-top-style:solid}.dropdown-menu .arrow+ul,.dropdown-menu .arrow+ul>li:first-child>a.total-item{border-top:0}.default-app-table{margin-left:20px}.default-app-table .default-app-list{padding:0 10px}.default-app-table .default-app-list .dropdown-toggle{min-width:213px}",""])},483:function(e,t){e.exports='<p><%- _("Enter your Splunk.com username and password to download the app.").t() %></p>\n<div class="username-placeholder"></div>\n<div class="password-placeholder"></div>\n<a class="forgot-password" target="_blank" rel="noopener noreferrer" id="forgot-password"><%- _("Forgot your password?").t() %></a>\n<p class="rights"><%- _("The app, and any related dependency that will be installed, may be provided by Splunk and/or a third party and your right to use these app(s) is in accordance with the applicable license(s) provided by Splunk and/or the third-party licensor. Splunk is not responsible for any third-party app and does not provide any warranty or support. If you have any questions, complaints or claims with respect to an app, please contact the applicable licensor directly whose contact information can be found on the Splunkbase download page.").t() %></p>\n<p class="rights">\n    <a class="license-agreement" target="_blank" rel="noopener noreferrer" id="splunk-base-link"></a>\n    <%- _(" is governed by the following license: ").t() %>\n    <a class="license-agreement" target="_blank" rel="noopener noreferrer" id="app-license"></a>\n</p>\n<p class="rights">\n    <%- _("I have read the terms and conditons of the license(s) and agree to be bound by them. I also agree to Splunk\'s ").t() %>\n    <a class="license-agreement" target="_blank" id="splunk-terms" href="https://www.splunk.com/en_us/legal/terms/terms-of-use.html"><%- _("Website Terms of Use.").t() %></a>\n</p>'},484:function(e,t,s){(e.exports=s(3)(!1)).push([e.i,'.section-header{border-bottom:1px solid #c3cbd4;padding-bottom:10px}.appsremote-sortfilter{margin:-5px 0 5px -10px}.content-area{position:relative}.content-area:after,.content-area:before{display:table;content:"";line-height:0}.content-area:after{clear:both}.content-area:before{content:"";position:absolute;top:0;bottom:0;left:0;width:300px;border-right:1px solid #c3cbd4;background-color:#fff;display:block}.shared-appsremote-filterbar{width:260px;padding:20px;-webkit-box-sizing:border-box();box-sizing:border-box();margin-right:-1px;position:relative;z-index:2;min-height:1040px}.shared-appsremote-filterbar .control-label{margin-top:5px;color:#6b7785;font-size:12px;text-transform:uppercase}.shared-appsremote-filterbar .control-group+.control-group>.control-label{margin-top:25px}.text-filter-control-wrapper{margin:-20px -20px 0}.text-filter-control-wrapper .text-filter-control{padding:15px 20px 10px;-webkit-box-sizing:border-box;box-sizing:border-box;white-space:nowrap}.text-filter-control-wrapper .text-filter-control.affix-top{left:0;top:0;background-color:#fff;z-index:406;position:fixed;right:0;-webkit-box-shadow:0 2px 4px #c3cbd4;box-shadow:0 2px 4px #c3cbd4}.text-filter-control-wrapper,.text-filter-control-wrapper .text-filter-control{min-height:82px}.text-filter-control-wrapper .shared-controls-textcontrol{width:260px}.tags{margin-bottom:20px}.tag{border-radius:10px;line-height:20px;padding:0 8px 0 10px;display:inline-block}.tag,.tag:focus,.tag:hover{color:#fff;background:#006297}.tag:focus,.tag:hover{text-decoration:none}.tag:focus{-webkit-box-shadow:0 0 1px 3px #006eaa;box-shadow:0 0 1px 3px #006eaa;border-collapse:separate;outline:0}.tag:focus:active:not([disabled]){-webkit-box-shadow:none;box-shadow:none}.results-control-bar{margin-left:300px;margin-bottom:5px}.results-control-bar .pagination{margin:-5px 0}.results-control-bar-inner{padding:15px 20px 10px;-webkit-box-sizing:border-box;box-sizing:border-box;border-left:1px solid #c3cbd4}.results-control-bar,.results-control-bar-inner{min-height:82px}.results-control-bar-inner.affix-top{left:300px;top:0;right:0;background-color:#f2f4f5;z-index:407;position:fixed}.results{margin-left:300px;padding:0 0 0 20px}.results .app-list-placeholder{margin-top:50px}.results-pane .shared-waitspinner{left:50%;top:200px;margin-left:150px;position:absolute;text-align:center}.add-on-tile-wrapper,.result-app-wrapper{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block;padding-right:20px;margin-bottom:20px;vertical-align:top}@media screen and (min-width:1400px){.result-app-wrapper{width:50%}}@media screen and (min-width:2000px){.result-app-wrapper{width:33%}}@media screen and (min-width:1024px){.add-on-tile-wrapper{width:50%}}.app{padding:20px 20px 14px;position:relative;background-color:#fff;border:1px solid #c3cbd4;border-radius:2px}.app .divider{margin:10px -20px;border-color:#e1e6eb}.app-icon{float:left;width:36px;margin-right:10px;text-align:top}.app-icon img{width:72px}.app h3{font-size:18px;line-height:36px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:top;margin:0 20px 20px 10px}.app-description{margin-bottom:10px;min-height:80px;white-space:pre-wrap}@media screen and (min-width:1400px){.result-app-wrapper .app-description{min-height:95px}}.app-description-full{display:none;max-height:400px;overflow-y:auto;overflow-x:hidden}.app-actions{min-height:26px}.app-actions-placeholder{float:right;margin-left:20px}.app-certified{background:no-repeat 0;background-size:12px 16px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAgCAYAAAAIXrg4AAAA8klEQVRIx2NwvqQwH4j/0wgnMNDQcBB+T2sL/o9aMIgt8L+qR1sLFr6c8P/Cl+P/i+5G0M4CGKDEIpwWTH3W9B8dkGMR3kgGGQYylBKLiEpF0Tds/u98t5osi0hKpvgsAslRLR9gswiXT8iyoOtxyf8XPx9T3wJsBn/+8xGcpHFlTAZaGUyUBZQYTFJOJsdgoi0g12CiigpKDB6t0YjF90EWNNCqTQRueIEAkGEAxOepaPh6IFZgQAdAwQKozeQaDHKkAwM+ALIZ6gJSg6OAgRQA1BAAiiQiDAc1ngUYyAEgjUDcT3ZwkGARKBHsx0gdRAAARPNzHwPy5LEAAAAASUVORK5CYII=");font-size:12px;padding-left:16px;margin-bottom:10px}.app-detail{white-space:nowrap;max-width:100%;overflow:hidden;display:inline-block;font-size:12px}.username-placeholder{padding-bottom:10px}.rights{padding-top:10px}.license-agreement{display:inline-block;padding-bottom:10px}.successbtn{display:block;margin-top:10px}.alert{margin-left:20px}',""])},"collections/services/appsbrowser/v1/Apps":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("collections/Base"),s("require/backbone"),s("shim/splunk.util"),s("models/services/appsbrowser/v1/App"),s("models/Base"),s("util/splunkd_utils"),s("util/general_utils")],void 0===(a=function(e,t,s,i,a,n,r,o,l){return s.extend({initialize:function(){this.initializeAssociated(),s.prototype.initialize.apply(this,arguments),this.queryProps={}},initializeAssociated:function(){this.paging=this.paging||new r,this.error=this.error||new r},model:n,url:"appsbrowser/v1/app/",sync:function(s,a,n){if("read"!==s)throw new Error("invalid method: "+s);n=n||{};var r={data:{},dataType:"json",url:this._url(a)};return e.extend(!0,r,n),r.data=t.each(r.data,(function(e,t){r.data[t]=l.asArray(e).join(",")})),i.sync.call(this,s,a,r)},_onerror:function(e,t,s){if(this.error.clear(),t.responseJSON)this.error.set(t.responseJSON);else{var i=this.error.get("errors")||[];i.push(t.statusText),this.error.set({status:t.status,errors:i})}},findByEntryName:function(e){return this.models.find((function(t){return t.get("appid")===e}))},_url:function(e){var s=t.result(e,"url"),i=o.fullpath(s,{}),n=a.propToQueryString(this.queryProps);return n&&(i+="?"+n),i},setLite:function(){this.queryProps.product="lite"},setIncludeAll:function(){this.queryProps.include="all"},parse:function(e,t){this.error.clear();var s=e.results;return delete e.results,this.paging.set(e),s}})}.apply(t,i))||(e.exports=a)},"models/apps_remote/InstallApp":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("require/backbone"),s("models/SplunkDBase"),s("util/splunkd_utils")],void 0===(a=function(e,t,s,i,a){return i.extend({url:"apps/local",sync:function(i,n,r){if("create"!==i)throw new Error("invalid method: "+i);r=r||{};var o={data:{filename:!0,output_mode:"json"},processData:!0,type:"POST",url:a.fullpath(t.isFunction(n.url)?n.url():n.url||n.id)};return e.extend(!0,o,r),s.sync.call(this,i,n,o)},parseSplunkDMessages:function(e){return t(e).has("status")&&t(e).has("msg")&&(e={messages:[{type:e.status.toLowerCase(),text:e.msg}]}),i.prototype.parseSplunkDMessages.call(this,e)}})}.apply(t,i))||(e.exports=a)},"models/apps_remote/ProxyLogin":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("require/backbone"),s("util/splunkd_utils")],void 0===(a=function(e,t,s,i){return s.Model.extend({url:"appsbrowser/account:login",initialize:function(e,t){s.Model.prototype.initialize.apply(this,arguments),this.on("error",this._onerror,this)},_onerror:function(e,s,a){var n=[];s.hasOwnProperty("status")&&(403==s.status?n.push(i.createMessageObject(i.ERROR,t("Incorrect username or password").t())):502==s.status&&n.push(i.createMessageObject(i.ERROR,t("Error connecting to server").t()))),this.trigger("serverValidated",!1,this,n)},sync:function(t,a,n){if("create"!==t)throw new Error("invalid method: "+t);n=n||{};var r=i.fullpath(this.url,{}),o={data:{password:a.get("password"),username:a.get("username")},processData:!0,type:"POST",dataType:"xml",url:r};return e.extend(!0,o,n),s.sync.call(this,t,a,o)},parse:function(t,s){var i={};return i.sbsessionid=e(t).find("id").text(),i}})}.apply(t,i))||(e.exports=a)},"models/services/admin/AppObjectsCounts":function(e,t,s){var i,a;i=[s("models/SplunkDBase")],void 0===(a=function(e){return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments)}})}.apply(t,i))||(e.exports=a)},"models/services/apps/remote/EntriesById":function(e,t,s){var i,a;i=[s("shim/jquery"),s("models/SplunkDBase"),s("require/backbone"),s("require/underscore"),s("util/splunkd_utils")],void 0===(a=function(e,t,s,i,a){return t.extend({url:"apps/remote/entriesbyid",sync:function(t,i,n){if("update"!==t)throw new Error("invalid method: "+t);n=n||{};var r=a.fullpath(i.id,{}),o={data:{auth:i.entry.content.get("auth"),action:i.entry.content.get("action"),output_mode:"json"},processData:!0,type:"POST",url:r};return e.extend(!0,o,n),s.sync.call(this,t,i,o)}})}.apply(t,i))||(e.exports=a)},"models/services/data/UserPrefGeneralDefault":function(e,t,s){var i,a;i=[s("models/StaticIdSplunkDBase")],void 0===(a=function(e){return e.extend({url:"data/user-prefs",initialize:function(){e.prototype.initialize.apply(this,arguments)}},{id:"data/user-prefs/general_default"})}.apply(t,i))||(e.exports=a)},"routers/AppsLocal":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("routers/Base"),s("collections/services/appsbrowser/v1/Apps"),s("collections/services/Messages"),s("collections/services/saved/Searches"),s("models/search/Job"),s("models/services/data/UserPrefGeneralDefault"),s("models/services/search/jobs/ResultJsonRows"),s("views/apps_local/Master"),s("views/shared/apps_remote/Error")],void 0===(a=function(e,t,s,i,a,n,r,o,l,p,d){return s.extend({initialize:function(){s.prototype.initialize.apply(this,arguments),this.collection.appRemotes=new i,this.collection.messages=new a,this.model.userPrefGeneralDefault=new o,this.deferreds.appRemotes=e.Deferred(),this.deferreds.messages=e.Deferred(),this.deferreds.userPrefGeneralDefault=e.Deferred(),this.enableAppBar=!1,this.fetchFailed=!1,this.fetchAppLocals=!0,this.setPageTitle(t("Apps and Add-Ons").t())},page:function(e,t,i){s.prototype.page.apply(this,arguments),this.bootstrapAppRemotes(),this.bootstrapMessages(),this.bootstrapAllAppsObjectsCounts(),this.bootstrapUserPrefGeneralDefault()},pageRender:function(){e.when(this.deferreds.appLocals,this.deferreds.appRemotes,this.deferreds.messages,this.deferreds.pageViewRendered).then(function(){this.shouldRender&&(this.initializeAppsView(),e(".preload").replaceWith(this.pageView.el),this.appsView.render().replaceContentsOf(e(".main-section-body")))}.bind(this))},bootstrapAllAppsObjectsCounts:function(){this.searchJob=new r,this.model.allAppsObjectCounts=new l;var e="| rest /servicesNS/nobody/-/admin/directory | stats count as adminDirCt by eai:acl.app | append [| rest /services/data/ui/panels | stats count as panelsCt by eai:acl.app] | append [| rest /services/data/indexes | stats count as indexesCt by eai:acl.app] | append [| rest /services/saved/searches | search "+n.ALERT_SEARCH_STRING+" | stats count as alertsCt by eai:acl.app] | append [| rest /services/saved/searches | search NOT ("+n.ALERT_SEARCH_STRING+" OR "+n.REMOTE_DATASET_SEARCH_STRING+") | stats count as reportsCt by eai:acl.app] | stats first(*) as * by eai:acl.app | fillnull";this.searchJob.save({},{data:{search:e}}).done(function(){this.searchJob.registerJobProgressLinksChild(r.RESULTS,this.model.allAppsObjectCounts,(function(){this.searchJob.isDone()&&this.model.allAppsObjectCounts.fetch()}),this),this.searchJob.startPolling()}.bind(this)),this.listenTo(this.model.allAppsObjectCounts,"sync",this.pageRender)},bootstrapAppRemotes:function(){e.when(this.deferreds.serverInfo).then(function(){if("resolved"!=this.deferreds.appRemotes.state()){this.collection.appRemotes.setIncludeAll(),this.model.serverInfo.isLite()&&this.collection.appRemotes.setLite();this.collection.appRemotes.safeFetch({cache:!0,data:{},success:function(e,t){this.deferreds.appRemotes.resolve()}.bind(this),error:function(e,t){this.fetchFailed=!0,this.deferreds.appRemotes.resolve()}.bind(this)})}else this.collection.appRemotes=void 0,this.deferreds.appRemotes.resolve()}.bind(this))},appLocalsFetchData:function(){return{count:-1}},bootstrapMessages:function(){"resolved"!==this.deferreds.messages.state()?this.collection.messages.fetch({success:function(e,t){this.deferreds.messages.resolve()}.bind(this),error:function(e,t){this.deferreds.messages.resolve()}.bind(this)}):(this.collection.messages=void 0,this.deferreds.messages.resolve())},bootstrapUserPrefGeneralDefault:function(){"resolved"!==this.deferreds.userPrefGeneralDefault.state()?this.model.userPrefGeneralDefault.fetch({data:{app:"system",owner:this.model.application.get("owner")},success:function(e,t){this.deferreds.userPrefGeneralDefault.resolve()}.bind(this),error:function(e,t){this.deferreds.userPrefGeneralDefault.resolve()}.bind(this)}):(this.model.userPrefGeneralDefault=void 0,this.deferreds.userPrefGeneralDefault.resolve())},initializeAppsView:function(){this.appsView||(this.fetchFailed?this.appsView=new d({collection:{appRemotes:this.collection.appRemotes},model:{user:this.model.user}}):this.appsView=new p({collection:{appRemotes:this.collection.appRemotes,appLocals:this.collection.appLocalsUnfilteredAll,messages:this.collection.messages},model:{application:this.model.application,user:this.model.user,allAppsObjectCounts:this.model.allAppsObjectCounts,serverInfo:this.model.serverInfo,userPrefGeneralDefault:this.model.userPrefGeneralDefault}}))}})}.apply(t,i))||(e.exports=a)},"views/apps_local/App":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("views/Base"),s("models/apps_remote/ProxyLogin"),s("views/apps_local/Enable"),s("views/apps_local/ObjectsDropDown"),s("views/apps_local/dialog/Master"),s(1624),s("shim/splunk.util"),s("uri/route")],void 0===(a=function(e,t,s,i,a,n,r,o,l,p){return s.extend({className:"add-on-tile-wrapper",initialize:function(){s.prototype.initialize.apply(this,arguments),this.children.enable=new a({model:{local:this.model.local,application:this.model.application}}),this.model.auth=new i,this.model.local&&(this.children.objectsDropDown=new n({model:{application:this.model.application,appObjectsCounts:this.model.appObjectsCounts},appName:this.model.local.getTitle(),appId:this.model.local.getAppId()})),this.children.enable.on("enableDisable",function(e){this.trigger("enableDisable",this.model.remote,e)}.bind(this))},events:{"click .app-more-description, .app-less-description":function(e){e.preventDefault(),this.$(".app-description-short, .app-description-full").toggle()},"click .obj-btn":function(t){t.preventDefault();var s=e(t.currentTarget);this.children.objectsDropDown&&this.children.objectsDropDown.shown?this.children.objectsDropDown.hide():(this.children.objectsDropDown.$el.html()||this.children.objectsDropDown.render().hide(),this.children.objectsDropDown.isAddedToDocument()||this.children.objectsDropDown.appendTo(e("body")),this.children.objectsDropDown.show(s))},"click .install-btn":function(t){t.preventDefault(),this.children.dialogView=new r({model:{appRemote:this.model.remote,auth:this.model.auth,application:this.model.application,serverInfo:this.model.serverInfo,user:this.model.user},collection:{messages:this.collection.messages},installSuccessCallback:this.options.installSuccessCallback,appType:"addon"==this.model.remote.get("type")?"add-on":"app"}),this.children.dialogView.on("onInstallSuccess",function(){this.trigger("installed",this.model.remote)}.bind(this)),e("body").append(this.children.dialogView.render().el),this.children.dialogView.show()}},render:function(){var e=l.make_url("/static/img/skins/default/disabled_app.png"),s=this.model.local&&this.model.local.isDisabled()?e:this.model.remote.getIcon(),i=this.model.local?this.model.local.getVersion():this.model.remote.getVersion(),a=this.model.local&&t(this.model.local.getTitle()).t()||t(this.model.remote.getTitle()).t();return this.$el.html(this.compiledTemplate({icon:s,title:a,version:i,description:this.model.remote.getDescription(),descriptionMaxLength:380,certified:this.model.remote.get("cert_status")})),this._renderUpdate(),this._renderEnable(),this._renderActions(),this},_renderUpdate:function(){if(this.model.local&&this.model.local.getLink("update")){var e=this.model.local.entry.content.get("update.implicit_id_required"),s=e?t("Overwrite with").t():t("Update to").t(),i=this.model.local.entry.content.get("update.version"),a="",n=this.model.local.getDetails();if(n&&-1!=n.indexOf("/")){var r=n.split("/");a=r[r.length-1]}var o={return_to:"/manager/"+this.model.application.get("app")+"/apps/local",implicit_id_required:e,app_name:this.model.local.getTitle()},p=l.make_full_url("manager/appinstall/"+a,o),d=t.template(this.updateTemplate,{link:p,updateText:s,updateVersion:i});this.$(".version").append(d)}},_renderEnable:function(){var e=!1;this.options&&this.options.isDefaultApp&&(e=this.options.isDefaultApp),this.children.enable&&this.children.enable.detach(),this.model.local&&(this.model.local.getLink("enable")||this.model.local.getLink("disable"))&&(this.$(".app-actions-placeholder").append(this.children.enable.render().$el),this.children.enable.$(".enable-checkbox").attr("disabled",e),this.$("."+this.children.enable.className).tooltip("destroy"),e&&this.$("."+this.children.enable.className).tooltip({title:t("You cannot disable an app if it is the default app.").t()}))},renderEnable:function(e){this.options.isDefaultApp=e,this._renderEnable()},_renderActions:function(){this.model.application.get("locale");var e=this.model.remote.getAppId();if(this.model.local){if(!this.model.local.isDisabled()){if(this.model.local.entry.content.get("visible")){var s=p.prebuiltAppLink(this.model.application.get("root"),this.model.application.get("locale"),e,"");this._addActionButton(t("Open").t(),s,"open-app-btn")}var i=t.template(this.dropdownTemplate,{text:t("Objects").t(),link:"#",className:"btn-objects obj-btn"});this.$(".app-actions").append(i)}if(this.model.local.getLink("setup")){var a=this.model.local.getAppId(),n=l.make_full_url("manager/"+a+"/apps/local/"+a+"/setup",{action:"edit"});this._addActionButton(t("Set up").t(),n,"btn-setup")}}else this.$(".app-actions-placeholder").append(l.sprintf('<a class="btn btn-primary install-btn" href="#">%s</a>',t("Install").t()))},_addActionButton:function(e,s,i){var a=t.template(this.actionTemplate,{text:e,link:s,className:i||""});this.$(".app-actions").append(a)},template:o,actionTemplate:'                 <a class="btn <%- className %>" href="<%- link %>"><%- text %></a>             ',dropdownTemplate:'                 <a class="btn <%- className %>" href="<%- link %>">                    <%- text %>                    <b class="caret"></b>                </a>             ',updateTemplate:'                 <span class="version-divider">|</span>                 <a href="<%- link %>">                     <%- updateText %> <%- updateVersion %>                 </a>             '})}.apply(t,i))||(e.exports=a)},"views/apps_local/Enable":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("views/Base"),s("shim/splunk.util")],void 0===(a=function(e,t,s,i){return s.extend({className:"enable-wrapper",events:{"click .enable-checkbox":function(){var e=this.$("#"+this.id).prop("checked");this.trigger("enableDisable",e),document[this.id].submit()}},render:function(){if(this.model.local){this.id="enable_"+this.model.local.getAppId();var e=this.model.application.get("app"),t=i.make_url("manager",e,"apps","local","multidelete"),s=i.getFormKey(),a=this.model.local.isDisabled()?"enable":"disable",n=this.model.local.getLink(a),r=this.model.local.getAppId();this.$el.html(this.compiledTemplate({id:this.id,endpoint:t,splunk_form_key:s,ctrl:a,ctrl_link:n,ctrl_name:r})),this.$("#"+this.id).prop("checked",!this.model.local.isDisabled())}return this},template:'                 <input id="<%- id %>" class="enable-checkbox" type="checkbox">                 <label for="<%- id %>">                     <%- _("Enable").t() %>                 </label>                 <form name="<%- id %>" action="<%- endpoint %>" method="post">                     <input type="hidden" name="splunk_form_key" value="<%- splunk_form_key %>">                     <input type="hidden" name="ctrl" id="ctrl" value="<%- ctrl %>">                     <input type="hidden" name="ctrl_link" id="ctrl-link" value="<%- ctrl_link %>">                     <input type="hidden" name="ctrl_name" id="ctrl-name" value="%<- ctrl_name %>">                     <input type="hidden" name="showAppContext" id="showAppContext">                     <input type="hidden" name="app_only" value="True">                 </form>             '})}.apply(t,i))||(e.exports=a)},"views/apps_local/Master":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("models/services/admin/AppObjectsCounts"),s("models/services/search/jobs/ResultJsonRows"),s("models/search/Job"),s("collections/services/saved/Searches"),s("views/Base"),s("views/apps_local/App"),s("views/shared/controls/DefaultApp"),s("views/shared/ModalConfirmation/Master"),s("views/shared/Restart"),s("shim/splunk.util"),s("views/shared/apps_remote/Master.pcss"),s("views/apps_local/Master.pcss")],void 0===(a=function(e,t,s,i,a,n,r,o,l,p,d,c,h,u){return r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments);var s={};this.appIds=[],this.appNames=[],this.defaultApp="search",this.errorMessage=t("Error saving default app. Please try again later.").t(),this.getAppWhitelist(),this.collection.appLocals.each((function(e,t){s[e.getSplunkAppsId()]=e})),this.collection.appRemotes.each(function(e,t){var i=e.getAppId(),a=e.get("type")||"addon",n=s[i],r=!1;this.children[i]=new o({model:{remote:e,local:n,application:this.model.application,appObjectsCounts:this.retrieveObjectsCountsForApp(this.model.allAppsObjectCounts,i),serverInfo:this.model.serverInfo,user:this.model.user},collection:{messages:this.collection.messages},installSuccessCallback:this.installSuccessCallback.bind(this),type:a,isDefaultApp:i==this.defaultApp}),this.appIds.push(i),this.appNames[i]=e.getTitle(),n&&(r=!c.normalizeBoolean(n.entry.content.get("disabled"))&&c.normalizeBoolean(n.entry.content.get("visible"))),this.updateWhitelist(i,a,r),this.children[i].on("installed",function(e){var t=e.getAppId(),s=e.get("type")||"addon";this.updateWhitelist(t,s,!0),this.setAppWhitelist()}.bind(this)),this.children[i].on("enableDisable",function(e,t){var s=e.getAppId(),i=e.get("type")||"addon";this.updateWhitelist(s,i,t),this.setAppWhitelist()}.bind(this))}.bind(this)),this.children.confirmDialog=new p({text:t("Are you sure you want to restart Splunk Light?").t()}),this.children.confirmDialog.on("success",function(){this.children.restartDialog=new d({model:{serverInfo:this.model.serverInfo}}),e("body").append(this.children.restartDialog.render().el),this.children.restartDialog.show(),c.restart_server()}.bind(this))},installSuccessCallback:function(e){this.collection.appLocals.fetch({data:{count:-1},success:function(t,s){var r=new a,l=new i,p="| rest /servicesNS/nobody/-/admin/directory | search eai:acl.app="+e+" | stats count as adminDirCt| append [| rest /services/data/ui/panels | search eai:acl.app="+e+" | stats count as panelsCt] | append [| rest /services/data/indexes | search eai:acl.app="+e+" | stats count as indexesCt] | append [| rest /services/saved/searches | search "+n.ALERT_SEARCH_STRING+" AND  eai:acl.app="+e+" | stats count as alertsCt] | append [| rest /services/saved/searches | search NOT ("+n.ALERT_SEARCH_STRING+" OR "+n.REMOTE_DATASET_SEARCH_STRING+") AND  eai:acl.app="+e+" | stats count as reportsCt] | stats first(*) as *";r.save({},{data:{search:p}}).done(function(){r.registerJobProgressLinksChild(a.RESULTS,l,(function(){r.isDone()&&l.fetch()}),this),r.startPolling()}.bind(this)),this.listenTo(l,"sync",function(){var t=this.collection.appLocals.findByEntryName(e),s=this.collection.appRemotes.findByEntryName(e),i=new o({model:{remote:s,local:t,application:this.model.application,appObjectsCounts:this.retrieveObjectsCounts(l),serverInfo:this.model.serverInfo,user:this.model.user},collection:{messages:this.collection.messages},type:s.get("type")||"addon",isDefaultApp:e==this.defaultApp});this.children[e].$el.replaceWith(i.render().$el),this.children[e]=i}.bind(this))}.bind(this)})},retrieveObjectsCounts:function(e){for(var t=e.get("rows"),i=e.get("fields"),a=new s,n=0;n<i.length;n++)a.set(i[n],t[0][n]);return a},retrieveObjectsCountsForApp:function(e,t){for(var i=e.get("rows"),a=e.get("fields"),n=new s,r=0;r<i.length;r++)if(i[r][0]===t)for(var o=1;o<a.length;o++)n.set(a[o],i[r][a.indexOf(a[o])]);return n},events:{"click .restart":function(e){e.preventDefault(),this.children.confirmDialog.render().el,this.children.confirmDialog.show()},"click [data-role=save-button]":function(e){this.children.defaultAppControl&&(this.model.userPrefGeneralDefault.entry.content.set({default_namespace:this.children.defaultAppControl.selectedItem.value}),this.model.userPrefGeneralDefault.set({id:this.modelId}),this.model.userPrefGeneralDefault.save({},{success:function(e){this.defaultApp=this.children.defaultAppControl.selectedItem.value,this.reRenderEnableBoxForApps()}.bind(this),error:function(e){this.createMessageBanner(this.errorMessage,"error")}.bind(this)})),e.preventDefault()}},getAppWhitelist:function(){this.model.userPrefGeneralDefault&&(this.TA_list=this.model.userPrefGeneralDefault.entry.content.get("TA_list"),this.app_list=this.model.userPrefGeneralDefault.entry.content.get("app_list"),this.defaultApp=this.model.userPrefGeneralDefault.entry.content.get("default_namespace")||"search","$default"==this.defaultApp&&(this.defaultApp="search"),this.modelId=this.model.userPrefGeneralDefault.id,this.TA_list?this.TA_list=this.TA_list.replace(/ /g,"").split(","):this.TA_list=[],this.app_list?(this.app_list=this.app_list.replace(/ /g,""),-1==this.app_list.indexOf("search")&&(this.app_list="search,"+this.app_list),this.app_list=this.app_list.split(",")):this.app_list=["search"])},setAppWhitelist:function(){this.model.userPrefGeneralDefault&&(this.model.userPrefGeneralDefault.entry.content.set({TA_list:this.TA_list.length>0?this.TA_list.join():""}),this.model.userPrefGeneralDefault.entry.content.set({app_list:this.app_list.length>0?this.app_list.join():"search"}),this.model.userPrefGeneralDefault.entry.content.set({default_namespace:this.defaultApp}),this.model.userPrefGeneralDefault.set({id:this.modelId}),this.model.userPrefGeneralDefault.save({},{success:function(e){this.children.defaultAppControl=new l({model:e,collection:{appLocals:this.collection.appLocals},showDefaultLabel:!1}),this.$("tr.default-app-pair td.default-app-list").html(""),this.children.defaultAppControl.render().appendTo(this.$("tr.default-app-pair td.default-app-list")),this.model.userPrefGeneralDefault.on("change",function(){this.$(".default-app-save-btn").removeAttr("disabled").attr("data-role","save-button")}.bind(this)),this.model.userPrefGeneralDefault.on("sync",function(){this.$(".default-app-save-btn").attr("disabled","disabled").removeAttr("data-role")}.bind(this))}.bind(this),error:function(){this.$(".default-app-table").hide()}.bind(this)}))},updateWhitelist:function(e,t,s){var i=!1;"app"==t&&this.app_list&&(i=this.app_list.indexOf(e)>-1,s?i||this.app_list.push(e):i&&(this.app_list=this.app_list.filter((function(e){})))),"addon"==t&&this.TA_list&&(i=this.TA_list.indexOf(e)>-1,s?i||this.TA_list.push(e):i&&(this.TA_list=this.TA_list.filter((function(e){}))))},reRenderEnableBoxForApps:function(){this.eachChild(function(e){e.options&&"app"===e.options.type&&e.renderEnable(e.model.local.getAppId()==this.defaultApp)}.bind(this))},createMessageBanner:function(e,t){var s=t||"info",i=c.sprintf('<div class="alert alert-%s"><i class="icon-alert"></i>%s</div>',s,e);this.$(".app-tiles").before(i)},checkForRestart:function(){if(this.collection.messages){var e=this.collection.messages.find((function(e){return"restart_required"==e.entry.get("name")})),s=[];if(e&&(this.collection.messages.find(function(e){-1!=e.entry.get("name").indexOf("restart_required_reason")&&t.each(this.appIds,(function(t){-1!=e.entry.content.get("message").indexOf(t)&&-1==s.indexOf(this.appNames[t])&&s.push(this.appNames[t])}),this)}.bind(this)),s.length>0)){var i=s.join(", "),a=t("Restart is required to configure updated add-ons").t(),n=c.sprintf('%s: %s <a class="restart" href="#">%s</a>',a,i,t("Click here to restart").t());this.createMessageBanner(n,"warning")}}},render:function(){this.$el.html(this.compiledTemplate());var e=this.$(".add-on-tiles"),t=this.$(".app-tiles"),s=0,i=0;return this.eachChild(function(a){a.options&&"app"===a.options.type?(i++,a.render().$el.appendTo(t)):(s++,a.render().$el.appendTo(e))}.bind(this)),0==i&&t.hide(),0==s&&e.hide(),this.setAppWhitelist(),this.checkForRestart(),this},template:'                 <div class="section-padded section-header">                     <h2 class="section-title"><%- _("Apps and Add-Ons").t() %></h2>                 </div>                 <div>                     <table class="default-app-table">                         <tr class="default-app-pair">                             <td class="default-app-label"><%- _("Default app").t() %></td>                             <td class="default-app-list"></td>                             <td class="default-app-action"><button class="btn btn-primary default-app-save-btn" disabled="disabled"><%- _("Save").t() %></button></td>                         </tr>                     </table>                 </div>                 <div class="app-tiles"><h3 class="section-title"><%- _("Apps").t() %></h3></div>                 <div class="add-on-tiles"><h3 class="section-title"><%- _("Add-Ons").t() %></h3></div>             '})}.apply(t,i))||(e.exports=a)},"views/apps_local/Master.pcss":function(e,t,s){var i=s(1625);"string"==typeof i&&(i=[[e.i,i,""]]);var a={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};s(4)(i,a);i.locals&&(e.exports=i.locals)},"views/apps_local/ObjectsDropDown":function(e,t,s){var i,a;i=[s("require/underscore"),s("shim/jquery"),s("views/shared/PopTart"),e,s("uri/route")],void 0===(a=function(e,t,s,i,a){return s.extend({moduleId:i.i,className:"dropdown-menu dropdown-menu-wide dropdown-menu-width-auto category-dropdown",initialize:function(){s.prototype.initialize.apply(this,arguments)},events:{"click .reports-item":function(e){e.preventDefault();var t=a.getContextualPageRouter(this.model.application);window.location.href=t.reports({data:{ns:this.options.appId}})},"click .alerts-item":function(e){e.preventDefault();var t=a.getContextualPageRouter(this.model.application);window.location.href=t.alerts({data:{ns:this.options.appId}})},"click .indexes-item":function(e){e.preventDefault();var t=a.getContextualPageRouter(this.model.application);window.location.href=t.manager(["data","indexes"],{data:{ns:this.options.appId}})},"click .panels-item":function(e){e.preventDefault();var t=a.getContextualPageRouter(this.model.application);window.location.href=t.manager(["data","ui","panels"],{data:{ns:this.options.appId}})},"click .total-item":function(e){e.preventDefault();var t=a.getContextualPageRouter(this.model.application);window.location.href=t.manager(["admin","directory"],{data:{ns:this.options.appId,app_only:1}})}},render:function(){this.el.innerHTML=s.prototype.template_menu;var i=t("<ul></ul>");return this.$el.append(i),0!=this.model.appObjectsCounts.attributes.length?(i.append(this.createDropDownItem("alerts-item","alerts",e("Alerts").t(),this.model.appObjectsCounts.get("alertsCt"))),i.append(this.createDropDownItem("indexes-item","indexes",e("Indexes").t(),this.model.appObjectsCounts.get("indexesCt"))),i.append(this.createDropDownItem("reports-item","index",e("Reports").t(),this.model.appObjectsCounts.get("reportsCt"))),i.append(this.createDropDownItem("panels-item","panels",e("Prebuilt panels").t(),this.model.appObjectsCounts.get("panelsCt"))),i.append(this.createDropDownItem("total-item","total",e("All Objects").t(),this.model.appObjectsCounts.get("adminDirCt")))):i.append(this.createDropDownItem("empty-item","empty",e("No objects").t(),-1)),this},createDropDownItem:function(e,t,s,i){return i>0?this.templateListItem({className:e,count:i,name:s,value:t}):-1==i?this.templateListItemEmpty({className:e,count:i,name:s,value:t}):void 0},templateListItem:e.template('<li>                    <a class="<%- className %>">                        <span><%- name %></span>                        <span data-value="<%- value %>" class="object-ct"><%- count %></span>                    </a>                </li>'),templateListItemEmpty:e.template('<li>                    <div class="empty-ct"><%- name %></div>                </li>')})}.apply(t,i))||(e.exports=a)},"views/apps_local/dialog/Master":function(e,t,s){var i,a;i=[s("views/shared/apps_remote/dialog/Master"),s("uri/route")],void 0===(a=function(e,t){return e.extend({returnToURL:function(){return t.appsLocal(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"))}})}.apply(t,i))||(e.exports=a)},"views/shared/apps_remote/Error":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("views/Base"),s("shim/splunk.util")],void 0===(a=function(e,t,s,i){return s.extend({initialize:function(){switch(s.prototype.initialize.apply(this,arguments),this.product=this.model.user.serverInfo.getProductName(),this.status=this.collection.appRemotes.error.attributes.status,this.err="",this.status){case 502:this.err=i.sprintf(t("Splunk server is unable to connect to splunkbase.splunk.com. Check internet connection for %s server, and try again.").t(),this.product);break;default:this.err=i.sprintf(t("Unable to fetch supported add-ons for %s. Try again at a later time. If this error persists, please contact customer support.").t(),this.product)}},render:function(){return this.$el.html(this.compiledTemplate({error:this.err})),this},template:'                 <div class="section-padded section-header">                     <h2 class="section-title"><%- _("Add-Ons").t() %></h2>                 </div>                 <div class="alert alert-error">                    <i class="icon-alert"></i>                    <%- error %>                </div>            '})}.apply(t,i))||(e.exports=a)},"views/shared/apps_remote/Master.pcss":function(e,t,s){var i=s(484);"string"==typeof i&&(i=[[e.i,i,""]]);var a={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};s(4)(i,a);i.locals&&(e.exports=i.locals)},"views/shared/apps_remote/dialog/Error":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),e,s("views/Base"),s("views/shared/FlashMessages"),s("views/shared/Modal"),s("shim/splunk.util")],void 0===(a=function(e,t,s,i,a,n,r){return i.extend({moduleId:s.i,initialize:function(e){i.prototype.initialize.call(this,e),this.children.flashMessages=new a({model:this.model.installApp}),this.appRemoteType="addon"===this.model.appRemote.get("type")?"Add-on":"App",this.headerText=r.sprintf(t("%s Installation Failed").t(),this.appRemoteType)},events:e.extend({},n.prototype.events,{"click .btn-primary":function(e){this.model.wizard.set("step",1)}}),render:function(){return this.$el.html(n.TEMPLATE),this.$(n.HEADER_TITLE_SELECTOR).html(this.headerText),this.children.flashMessages.render().prependTo(this.$(n.BODY_SELECTOR)),this.$(n.FOOTER_SELECTOR).append(n.BUTTON_CANCEL),this.$(n.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+t("Retry").t()+"</a>"),this}})}.apply(t,i))||(e.exports=a)},"views/shared/apps_remote/dialog/Install":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),e,s("views/Base"),s("views/shared/Modal"),s("shim/splunk.util")],void 0===(a=function(e,t,s,i,a,n){return i.extend({moduleId:s.i,initialize:function(e){i.prototype.initialize.call(this,e),this.appType="addon"===this.model.appRemote.get("type")?"Add-on":"App",this.headerText=n.sprintf("%s %s...",t("Installing").t(),this.appType)},render:function(){this.$el.html(a.TEMPLATE),this.$(a.HEADER_TITLE_SELECTOR).html(this.options.customHeader?this.options.customHeader:this.headerText),this.$(a.BUTTON_CLOSE_SELECTOR).remove();var e=this.options.customBody||n.sprintf(t("%s is being downloaded and installed.").t(),this.model.appRemote.get("title")),s=this.compiledTemplate({msg:e});return this.$(a.BODY_SELECTOR).append(s),this},template:"                <p>                    <%- msg %>                </p>            "})}.apply(t,i))||(e.exports=a)},"views/shared/apps_remote/dialog/Login":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),e,s("views/Base"),s("views/shared/Modal"),s("views/shared/controls/TextControl"),s("views/shared/FlashMessages"),s(483),s("uri/route")],void 0===(a=function(e,t,s,i,a,n,r,o,l){return i.extend({template:o,moduleId:s.i,initialize:function(e){i.prototype.initialize.call(this,e),this.loginBtnLabel=this.options.loginBtnLabel||t("Agree and Install").t(),this.children.flashMessages=new r({model:this.model.auth}),this.children.username=new n({model:this.model.auth,modelAttribute:"username",elementId:"username",placeholder:t("Username").t(),updateOnKeyUp:!0,updateOnAutofill:!0}),this.children.password=new n({model:this.model.auth,modelAttribute:"password",elementId:"password",placeholder:t("Password").t(),updateOnKeyUp:!0,password:!0,updateOnAutofill:!0})},events:e.extend({},a.prototype.events,{"click .btn-primary":function(s){s.preventDefault(),e(s.target).hasClass("disabled")||(e(s.target).text(t("Processing...").t()).addClass("disabled"),this.doLogin(this.model.auth.get("username"),this.model.auth.get("password")))},"click .forgot-password":function(e){e.preventDefault();l.redirectTo("http://www.splunk.com/page/lost_password",!0)}}),doLogin:function(e,t){this.model.auth.on("invalid",function(e,t){this.restoreButton()}.bind(this)),this.model.auth.save({username:e,password:t,consent:!0},{error:function(e,t,s){this.restoreButton()}.bind(this),success:function(e,t,s){this.onLoginSuccess()}.bind(this)})},onLoginSuccess:function(){this.model.wizard.set("step",1)},restoreButton:function(){this.$(a.FOOTER_SELECTOR).find(".modal-btn-primary").text(this.loginBtnLabel).removeClass("disabled")},render:function(){this.$el.html(a.TEMPLATE),this.$(a.HEADER_TITLE_SELECTOR).html(t("Login and Install").t()),this.$(a.BODY_SELECTOR).append(a.FORM_HORIZONTAL);var e=this.compiledTemplate({_:t});return this.$(a.BODY_FORM_SELECTOR).append(e),this.children.flashMessages.render().prependTo(this.$(a.BODY_SELECTOR)),this.$(a.BODY_FORM_SELECTOR).find(".username-placeholder").html(this.children.username.render().el),this.$(a.BODY_FORM_SELECTOR).find(".password-placeholder").html(this.children.password.render().el),this.$(a.BODY_FORM_SELECTOR).find("#splunk-base-link").text(this.model.appRemote.get("title")).attr("href",this.model.appRemote.get("path")),this.$(a.BODY_FORM_SELECTOR).find("#app-license").text(this.model.appRemote.get("license_name")).attr("href",this.model.appRemote.get("license_url")),this.$(a.FOOTER_SELECTOR).append(a.BUTTON_CANCEL),this.$(a.FOOTER_SELECTOR).append('<a href="#" class="btn btn-primary modal-btn-primary">'+this.loginBtnLabel+"</a>"),this.children.username.focus(),this}})}.apply(t,i))||(e.exports=a)},"views/shared/apps_remote/dialog/Master":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("require/backbone"),e,s("views/shared/Modal"),s("views/shared/ModalLocalClassNames"),s("views/shared/apps_remote/dialog/Login"),s("views/shared/apps_remote/dialog/Install"),s("views/shared/apps_remote/dialog/Success"),s("views/shared/apps_remote/dialog/Error"),s("views/shared/RestartRequired"),s("views/shared/Restart"),s("views/shared/FlashMessages"),s("uri/route"),s("models/apps_remote/InstallApp"),s("models/services/apps/remote/EntriesById"),s("util/splunkd_utils"),s("shim/splunk.util")],void 0===(a=function(e,t,s,i,a,n,r,o,l,p,d,c,h,u,m,f,g,b){return a.extend({moduleId:i.i,className:a.CLASS_NAME,initialize:function(i){a.prototype.initialize.apply(this,arguments),this.model.wizard=this.model.wizard||new s.Model,this.model.installApp=new m;var n=this.options.loginViewClass||r;this.children.login=new n({model:{auth:this.model.auth,application:this.model.application,wizard:this.model.wizard,appRemote:this.model.appRemote},template:i.loginTemplate});var h=this.options.installViewClass||o;this.children.install=new h(e.extend(!0,{},{model:{appRemote:this.model.appRemote},template:i.installTemplate,customHeader:i.customHeader},this.options.installViewOptions));var u=this.options.successViewClass||l;this.children.success=new u(e.extend(!0,{},{model:{application:this.model.application,appRemote:this.model.appRemote,user:this.model.user,wizard:this.model.wizard,serverInfo:this.model.serverInfo},collection:{messages:this.collection.messages},template:i.successTemplate,footerTemplate:i.footerSuccessTemplate},this.options.successViewOptions));var f=this.options.errorViewClass||p;this.children.error=new f({model:{appRemote:this.model.appRemote,installApp:this.model.installApp,wizard:this.model.wizard,auth:this.model.auth},collection:{appLocals:this.collection.appLocals,appLocalsUnfiltered:this.collection.appLocalsUnfiltered}}),this.successRestartRequired=new d({model:{serverInfo:this.model.serverInfo},message:b.sprintf(t("You must restart Splunk %s to complete installation of %s.").t(),this.model.serverInfo.getProductName(),this.model.appRemote.get("title")),return_to:this.returnToURL(),restartCallback:function(){this.successRestartRequired.hide(),this.restart.render(),this.restart.show()}.bind(this)}),this.successRestartRequired.on("hide",function(e){if(e&&e.reason){if(this.options.installSuccessCallback){var t=this.model.appRemote.get("appid");this.options.installSuccessCallback(t)}this.hide()}}.bind(this)),this.restart=new c({model:{serverInfo:this.model.serverInfo}}),this.model.wizard.on("change:step",(function(){this.visibility()}),this),this.collection.messages.on("sync",(function(){this.model.wizard.set("step",2)}),this),this.options.showSuccessDialog||this.model.wizard.set("step",0)},returnToURL:function(){return u.appsRemote(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"))},onInstallAppValidated:function(e,t,s){e?(this.collection.messages.fetch(),this.trigger("onInstallSuccess")):this.model.wizard.set("step",-1)},installApp:function(){var e=this.model.appRemote.get("release").path;this.listenToOnce(this.model.installApp,"serverValidated",this.onInstallAppValidated),this.model.installApp.save({},{data:{auth:this.model.auth.get("sbsessionid"),name:e},success:function(e,t,s){this.model.appRemote.set("visible",t.entry[0].content.visible)}.bind(this)})},unbindHide:function(){this.on("hide",null)},hideDialogs:function(){this.children.error.$el.hide(),this.children.login.$el.hide(),this.children.install.$el.hide(),this.children.success.$el.hide(),this.successRestartRequired.hide(),this.restart.hide()},visibility:function(){switch(this.unbindHide(),this.hideDialogs(),this.model.wizard.get("step")){case-1:this.children.error.render(),this.children.error.$el.show();break;case 0:this.children.login.$el.show();break;case 1:this.installApp(),this.children.install.$el.show();break;case 2:this.needsRestart()?(this.hide(),this.successRestartRequired.render(),this.successRestartRequired.show()):(this.children.success.render(),this.children.success.$el.show(),this.on("hide",function(e){if(this.options.installSuccessCallback){var t=this.model.appRemote.get("appid");this.options.installSuccessCallback(t)}}.bind(this)));break;default:this.children.login.$el.show()}},needsRestart:function(){if(this.collection.messages.length>0)for(var e=0;e<this.collection.messages.models.length;e++)if("restart_required"===this.collection.messages.models[e].entry.get("name"))return!0;return!1},render:function(){return this.$el.append(this.children.login.render().el),this.$el.append(this.children.install.render().el),this.$el.append(this.children.success.render().el),this.$el.append(this.children.error.render().el),this.$el.append(this.successRestartRequired.render().el),this.$el.append(this.restart.render().el),this.visibility(),this}})}.apply(t,i))||(e.exports=a)},"views/shared/apps_remote/dialog/Success":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),e,s("views/Base"),s("views/shared/Modal"),s("uri/route"),s("shim/splunk.util")],void 0===(a=function(e,t,s,i,a,n,r){return i.extend({moduleId:s.i,initialize:function(e){i.prototype.initialize.call(this,e)},events:{"click .goapp":function(e){e.preventDefault();var t=this.model.appRemote.get("appid"),s=n.prebuiltAppLink(this.model.application.get("root"),this.model.application.get("locale"),t,"");document.location.href=s}},canOpenApps:function(){return this.model.appRemote.get("visible")},renderSuccessOptions:function(){this.options.enableAppsListingRedirect&&this.$(a.BODY_FORM_SELECTOR).append('<a href="#" class="btn btn-secondary successbtn appslisting">'+t("View Apps").t()+"</a>"),this.canOpenApps()&&this.model.user.canUseApps()&&this.$(a.BODY_FORM_SELECTOR).append('<a href="#" class="btn btn-secondary successbtn goapp">'+t("Open the App").t()+"</a>"),this.$(a.BODY_FORM_SELECTOR).append('<a href="/" class="btn btn-secondary successbtn gohome">'+t("Go Home").t()+"</a>")},render:function(){this.$el.html(a.TEMPLATE),this.$(a.HEADER_TITLE_SELECTOR).html(t("Complete").t()),this.$(a.BODY_SELECTOR).append(a.FORM_HORIZONTAL);var e=this.options.customBody||r.sprintf(t("%s was successfully installed.").t(),this.model.appRemote.get("title")),s=this.compiledTemplate({msg:e});return this.$(a.BODY_FORM_SELECTOR).append(s),this.options.template||this.renderSuccessOptions(),this.options.footerTemplate?this.$(a.FOOTER_SELECTOR).html(t(this.options.footerTemplate).template({})):this.$(a.FOOTER_SELECTOR).append(a.BUTTON_DONE),this},template:"<p><%- msg %></p>"})}.apply(t,i))||(e.exports=a)},"views/shared/controls/DefaultApp":function(e,t,s){var i,a;i=[s("shim/jquery"),s("require/underscore"),s("views/shared/controls/SyntheticSelectControl"),e],void 0===(a=function(e,t,s,i){return s.extend({moduleId:i.i,className:"control btn-group select-field-type",initialize:function(){var i=this.model.entry.content.get("app_list"),a=t.filter(this.collection.appLocals.models,(function(e){var t=e.getAppId();return i.indexOf(t)>-1})),n=t.map(a,(function(e){var t=e.getAppId();return{label:e.entry.content.get("label"),value:t}})),r=n.find(function(e){return e.value==this.model.entry.content.get("default_namespace")}.bind(this));e.extend(this.options,{toggleClassName:"btn",items:n,label:!1!==this.options.showDefaultLabel?t("Default App").t():""}),s.prototype.initialize.call(this,this.options),r&&r.value&&this.setValue(r.value)}})}.apply(t,i))||(e.exports=a)}});